import random
import subprocess

#generate a new mac address
random_mac = [0x00, 0x50, 0x56, random.randint(0x00,0x7f), random.randint(0x00,0xff), random.randint(0x00,0xff)]
mac_addr = ":".join(map(lambda x: "%02x" %x,random_mac))
print(random_mac)
print("new mac address:", mac_addr)

#change the MAC of NIC

#1: disconnect from the LAN
subprocess.call(["ifdown","eth0"])

#2: deactivate the NIC
subprocess.call(["ip", "link", "set", "eth0", "down"])

#3: change the MAC now!!!
subprocess.call(["ip", "link", "set", "eth0", "addr",mac_addr])

#4: activate again the MAC address
subprocess.call(["ip", "link", "set", "eth0", "up"])

#5: show the new MAC address:
#subprocess.call(["ip", "link", "show", "dev", "eth0"])

#6: Connect again to LAN
